{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jeel\\\\mynodeproject\\\\data\\\\chatAppFront\\\\src\\\\pages\\\\GroupChat\\\\GroupChat.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\nimport { Avatar, Button, message, Upload } from \"antd\";\nimport axios from \"axios\";\nimport Avatars from \"react-avatar\";\nimport ImageViewer from \"react-simple-image-viewer\";\nimport moment from \"moment\";\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport { RiSendPlaneLine } from \"react-icons/ri\";\nimport Icons from \"../../component/Icons/Icons\";\nimport ModalField from \"../../component/Modal/ModalDemo\";\nimport APi from \"../../core/chatRedux/axios\";\nimport { getData } from \"../../core/locaStorage/Local\";\nimport ScrollToBottom from \"react-scroll-to-bottom\";\nimport { GroupStyle } from \"./GroupStyle\";\nimport \"./GroupChatStyle.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst GroupChat = ({\n  socket,\n  selectedGroup,\n  userExist\n}) => {\n  _s();\n\n  // const {} = props;\n  const [text, setText] = useState(\"\");\n  const [recieverD, setRecieverD] = useState({});\n  const [messages, setMessages] = useState([]);\n  const [openModal, setOpenModal] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n  const [isViewerOpen, setIsViewerOpen] = useState(false);\n  const [currentImage, setCurrentImage] = useState(0);\n  const [cancelUploadDisable, setcancelUploadDisable] = useState(false);\n  const [images, setImages] = useState([]);\n  const [groupDeail, setGroupDetail] = useState([]);\n  const messageEl = useRef(null);\n  const [fileStatus, setFileStatus] = useState([]);\n  const [files, setFiles] = useState([]);\n  const [fileLoading, setFileLoading] = useState(false);\n  const [alerted, setAlerted] = useState(false);\n  const [tagModel, setTagModel] = useState(false);\n  const [tagname, settagname] = useState(\"\");\n  const [tagList, settagList] = useState([]);\n  const ref = useRef(\"\");\n  messages.sort(function (a, b) {\n    return a.date.localeCompare(b.date);\n  });\n\n  const onchange = event => {\n    const value = event.target.value;\n\n    if (value.endsWith(\"@\")) {\n      setTagModel(true);\n      APi.getAllUsers({\n        Authorization: `Bearer ${getData(\"user\").token}`\n      }).then(res => {\n        settagList([...res.data.data]);\n      }).catch(() => {\n        settagList([]);\n      });\n    }\n\n    if (value === \"\") {\n      setTagModel(false);\n    }\n\n    setText(value);\n  };\n\n  const closeTagModel = () => {\n    setTagModel(false);\n    settagname(\"\");\n  };\n\n  const addTagName = user => {\n    console.log(\"user\", user);\n    let addName = text + user.name + \" \";\n    setText(addName);\n    setTagModel(false);\n  };\n\n  const tagNameFilter = event => {\n    const value = event.target.value;\n    settagname(value);\n    APi.getAllUsers({\n      Authorization: `Bearer ${getData(\"user\").token}`\n    }).then(res => {\n      const list = [...res.data.data];\n      const filterList = list.filter(item => {\n        if (item.name.match(value, \"/gi\")) {\n          return item;\n        }\n      });\n      settagList(filterList);\n    }).catch(() => {\n      settagList([]);\n    });\n  };\n\n  useEffect(() => {\n    // setMessages([]);\n    if (recieverD && Object.keys(recieverD).length === 0) {// setSubmitted(true);\n    } else {// setSubmitted(false);\n    }\n  }, [recieverD]); // select Group\n\n  useEffect(() => {\n    setMessages([]);\n    const groupData = getData(\"selectedGroup\");\n\n    if (groupData && Object.keys(groupData).length !== 0) {\n      // setSubmitted(true);\n      setGroupDetail(groupData);\n    } else {\n      setGroupDetail({});\n    }\n\n    if (groupData && Object.keys(groupData).length !== 0) {\n      const user = getData(\"user\");\n      socket.emit(\"messageGroupHistory\", {\n        sender: user.id,\n        groupId: groupData.groupId,\n        header: {\n          auth_token: getData(\"user\").token\n        }\n      });\n    }\n  }, [selectedGroup]);\n  useEffect(() => {\n    const user = getData(\"user\");\n    setCurrentUser(user);\n  }, []);\n\n  const sendData = () => {\n    if (text !== \"\" && currentUser) {\n      //final data\n      let data = {\n        sender: getData(\"user\"),\n        type: \"chat\",\n        message: text,\n        groupId: getData(\"selectedGroup\").groupId,\n        sentAt: new Date()\n      };\n      data.header = {};\n      data.header.auth_token = getData(\"user\").token;\n      console.log(data, \"......###\");\n      socket.emit(\"groupMessages\", data);\n      setText(\"\");\n    }\n  };\n\n  useEffect(() => {\n    socket.on(\"groupMessagesResponse\", message => {\n      console.log(\"mess\", message);\n\n      if (getData(\"selectedGroup\")) {\n        if (message.groupId === getData(\"selectedGroup\").groupId) {\n          let temp = {\n            type: message.type ? message.type : null,\n            sender: message.sender,\n            text: message.message,\n            date: moment(message.sendAt).format(\"YYYY-MM-DD HH:mm:ss\"),\n            filename: message.filename\n          };\n          setMessages(prev => {\n            prev.push(temp);\n            return prev;\n          });\n          setFileLoading(false);\n          setOpenModal(false);\n          setFiles([]);\n        }\n      }\n    });\n    socket.on(\"messageGroupHistoryResponse\", message => {\n      let temp = {\n        type: message.type ? message.type : null,\n        sender: message.sender,\n        text: message.message,\n        date: moment(message.sent_at).format(\"YYYY-MM-DD HH:mm:ss\"),\n        filename: message.filename\n      };\n      setMessages(prev => {\n        prev.push(temp);\n        return prev;\n      });\n      setFileLoading(false);\n      setOpenModal(false);\n      setFiles([]);\n    });\n  }, [socket]); // upload\n\n  const addFile = e => {\n    // setAlerted(false);\n    const onlyFiles = [...files];\n    const dd = files.findIndex(eee => eee.name === e.file.originFileObj.name);\n\n    if (e.file.type !== \"\") {\n      if (dd === -1) {\n        const fsize = e.file.size;\n        const file = Math.round(fsize / 1024);\n\n        if (file >= 4096) {\n          if (alerted === false) {\n            // message.error(\"please select a file less than 4mb\");\n            setAlerted(true);\n          }\n        } else {\n          onlyFiles.push(e.file.originFileObj);\n        }\n      }\n\n      setFiles([...onlyFiles]);\n    } else {\n      if (alerted === false) {\n        // message.error(\"Unknown File Type !\");\n        setAlerted(true);\n      }\n    }\n\n    setTimeout(() => {\n      setAlerted(false);\n    }, 2000);\n  };\n\n  const removeFile = index => {\n    const dataList = files;\n    dataList.splice(index, 1);\n    setFiles([...dataList]);\n    const fileStatusSet = fileStatus;\n    fileStatusSet.splice(index, 1);\n    setFileStatus([...fileStatusSet]);\n  }; // submit file\n\n\n  const addWarroomFile = imageFile => {\n    setcancelUploadDisable(true);\n    setFileLoading(true);\n    const f = [];\n    imageFile.forEach((dd, index) => {\n      f[index] = {\n        index: index,\n        image: dd\n      };\n    });\n\n    if (currentUser && groupDeail) {\n      const form = new FormData();\n      imageFile.forEach(element => {\n        form.append(\"files\", element);\n      });\n      form.append(\"sender\", currentUser.id);\n      form.append(\"groupId\", groupDeail.groupId);\n      form.append(\"type\", \"image\");\n      APi.groupFileUpload(form).then(res => {\n        console.log(res, \"fileResponse\");\n        const s = {};\n        s.header = {};\n        s.header.auth_token = getData(\"user\").token;\n        s.files = [...res.data.data];\n        console.log(s);\n        socket.emit(\"groupFileUpload\", s);\n        setOpenModal(false);\n        setFileLoading(false);\n        setFiles([]);\n        setcancelUploadDisable(false);\n      }).catch(err => {\n        console.error(err);\n        setcancelUploadDisable(false);\n      });\n    }\n  }; // download logic\n\n\n  const handleDonl = (file, filename) => {\n    const url = window.URL.createObjectURL(new Blob([file]));\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.setAttribute(\"download\", filename);\n    document.body.appendChild(link);\n    link.click();\n  }; // handle image download\n\n\n  const handleDownload = (url, filename) => {\n    axios.get(url, {\n      responseType: \"blob\"\n    }).then(res => {\n      handleDonl(res.data, filename);\n    });\n  }; // image preview\n\n\n  const openImageViewer = useCallback((index, i) => {\n    setCurrentImage(index);\n    setImages([i]);\n    setIsViewerOpen(true);\n  }, []);\n\n  const closeImageViewer = () => {\n    setCurrentImage(0);\n    setImages([]);\n    setIsViewerOpen(false);\n  };\n\n  const imageupload = () => {\n    const value = ref.current.click();\n  };\n\n  const onImageChange = event => {\n    event.preventDefault();\n    let files = event.target.files;\n    let temp = [];\n\n    for (let a in files) {\n      temp.push(files[a]);\n    }\n\n    let aban = temp.splice(0, temp.length - 2);\n    setImages(aban);\n    addWarroomFile(aban);\n  };\n\n  return /*#__PURE__*/_jsxDEV(GroupStyle, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: event => onImageChange(event),\n      ref: ref,\n      style: {\n        display: \"none\"\n      },\n      multiple: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat\",\n      children: [userExist === false || Object.keys(groupDeail).length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nodata-page\",\n        children: [/*#__PURE__*/_jsxDEV(Icons, {\n          type: \"moontech\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: \"bolder\",\n            fontSize: \"20px\",\n            color: \"#70bde9\"\n          },\n          children: \"No conversation selected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-name\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [/*#__PURE__*/_jsxDEV(Avatar, {\n              style: {\n                cursor: \"pointer\"\n              },\n              size: {\n                xs: 30,\n                sm: 30,\n                md: 30,\n                lg: 30,\n                xl: 30\n              },\n              children: groupDeail.groupName ? `${groupDeail.groupName.charAt(0)}` : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this), groupDeail.groupName && Object.keys(groupDeail).length !== 0 ? groupDeail.groupName : \"_ _ _\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-message\",\n          ref: ref => {\n            if (ref !== null) {\n              ref.addEventListener(\"DOMNodeInserted\", event => {\n                const {\n                  currentTarget: target\n                } = event;\n                target.scroll({\n                  top: target.scrollHeight,\n                  behavior: \"smooth\"\n                });\n              });\n            }\n          },\n          children: messages.map((i, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: i.sender.id === currentUser.id ? \"message mess-right\" : \"message\",\n            children: i.type === \"image\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: i.sender.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: i.sender.id !== currentUser.id ? \"img hoverable\" : \"img\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${i.text}`,\n                  onClick: () => openImageViewer(0, i.text),\n                  alt: \"img\",\n                  style: {\n                    cursor: \"pointer\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 23\n              }, this), i.sender.id !== currentUser.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Icons, {\n                  type: \"Download\",\n                  onClick: () => handleDownload(i.text, i.filename)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: i.date\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  marginTop: \"3px\",\n                  padding: \"unset\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: i.date\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(Icons, {\n                  type: \"Download\",\n                  onClick: () => handleDownload(i.text, i.filename)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true) : i.type === \"file\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: i.sender.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: i.sender.id !== currentUser.id ? \"img hoverable\" : \"img\",\n                style: {\n                  width: \"100%\",\n                  height: \"auto\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    display: \"flex\",\n                    wordBreak: \"break-all\"\n                  },\n                  className: i.sender.id === currentUser.id ? \"fileType-right\" : \"fileType\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    fill: \"#000000\",\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    viewBox: \"0 0 80 80\",\n                    width: \"18px\",\n                    height: \"18px\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M 15 9 L 15 71 L 65 71 L 65 23.585938 L 50.414063 9 Z M 17 11 L 49 11 L 49 25 L 63 25 L 63 69 L 17 69 Z M 51 12.414063 L 61.585938 23 L 51 23 Z M 22 13 C 21.449219 13 21 13.449219 21 14 C 21 14.550781 21.449219 15 22 15 C 22.550781 15 23 14.550781 23 14 C 23 13.449219 22.550781 13 22 13 Z M 22 17 C 21.449219 17 21 17.449219 21 18 C 21 18.550781 21.449219 19 22 19 C 22.550781 19 23 18.550781 23 18 C 23 17.449219 22.550781 17 22 17 Z M 22 21 C 21.449219 21 21 21.449219 21 22 C 21 22.550781 21.449219 23 22 23 C 22.550781 23 23 22.550781 23 22 C 23 21.449219 22.550781 21 22 21 Z M 22 25 C 21.449219 25 21 25.449219 21 26 C 21 26.550781 21.449219 27 22 27 C 22.550781 27 23 26.550781 23 26 C 23 25.449219 22.550781 25 22 25 Z M 22 29 C 21.449219 29 21 29.449219 21 30 C 21 30.550781 21.449219 31 22 31 C 22.550781 31 23 30.550781 23 30 C 23 29.449219 22.550781 29 22 29 Z M 22 33 C 21.449219 33 21 33.449219 21 34 C 21 34.550781 21.449219 35 22 35 C 22.550781 35 23 34.550781 23 34 C 23 33.449219 22.550781 33 22 33 Z M 22 37 C 21.449219 37 21 37.449219 21 38 C 21 38.550781 21.449219 39 22 39 C 22.550781 39 23 38.550781 23 38 C 23 37.449219 22.550781 37 22 37 Z M 22 41 C 21.449219 41 21 41.449219 21 42 C 21 42.550781 21.449219 43 22 43 C 22.550781 43 23 42.550781 23 42 C 23 41.449219 22.550781 41 22 41 Z M 22 45 C 21.449219 45 21 45.449219 21 46 C 21 46.550781 21.449219 47 22 47 C 22.550781 47 23 46.550781 23 46 C 23 45.449219 22.550781 45 22 45 Z M 22 49 C 21.449219 49 21 49.449219 21 50 C 21 50.550781 21.449219 51 22 51 C 22.550781 51 23 50.550781 23 50 C 23 49.449219 22.550781 49 22 49 Z M 22 53 C 21.449219 53 21 53.449219 21 54 C 21 54.550781 21.449219 55 22 55 C 22.550781 55 23 54.550781 23 54 C 23 53.449219 22.550781 53 22 53 Z M 22 57 C 21.449219 57 21 57.449219 21 58 C 21 58.550781 21.449219 59 22 59 C 22.550781 59 23 58.550781 23 58 C 23 57.449219 22.550781 57 22 57 Z M 22 61 C 21.449219 61 21 61.449219 21 62 C 21 62.550781 21.449219 63 22 63 C 22.550781 63 23 62.550781 23 62 C 23 61.449219 22.550781 61 22 61 Z M 22 65 C 21.449219 65 21 65.449219 21 66 C 21 66.550781 21.449219 67 22 67 C 22.550781 67 23 66.550781 23 66 C 23 65.449219 22.550781 65 22 65 Z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 462,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 455,\n                    columnNumber: 27\n                  }, this), i.filename, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 23\n              }, this), i.sender.id !== currentUser.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Icons, {\n                  type: \"Download\",\n                  onClick: () => handleDownload(i.text, i.filename)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: i.date\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  marginTop: \"3px\",\n                  padding: \"unset\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: i.date\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(Icons, {\n                  type: \"Download\",\n                  onClick: () => handleDownload(i.text, i.filename)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: i.sender.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 23\n              }, this), i.sender.id !== currentUser.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(Avatars, {\n                  size: \"30\",\n                  name: i.sender.name,\n                  round: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: i.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  justifyContent: \"end\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: i.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(Avatars, {\n                  googleId: \"118096717852922241760\",\n                  size: \"30\",\n                  name: i.sender.name,\n                  round: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: i.date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"send\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Enter Your Message\",\n            value: text,\n            style: {\n              cursor: submitted ? \"not-allowed\" : \"text\",\n              opacity: submitted ? 0.5 : 1\n            },\n            disabled: submitted,\n            onChange: e => {\n              setText(e.target.value);\n            },\n            onKeyPress: e => {\n              if (e.key === \"Enter\") {\n                sendData();\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn-box1\",\n            onClick: () => imageupload(),\n            children: /*#__PURE__*/_jsxDEV(Icons, {\n              className: \"svgIcon\",\n              type: \"attachemt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn-box\",\n            onClick: !submitted ? () => sendData() : () => message.error({\n              content: \"Select User to Send Message\"\n            }),\n            children: /*#__PURE__*/_jsxDEV(RiSendPlaneLine, {\n              className: \"btn-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), isViewerOpen && /*#__PURE__*/_jsxDEV(ImageViewer, {\n        src: images,\n        currentIndex: currentImage,\n        onClose: closeImageViewer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ModalField, {\n        visible: tagModel,\n        title: \"Attachment\",\n        className: \"uploadmodal\",\n        onCancel: closeTagModel,\n        footer: false,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            maxHeight: \"100px\",\n            overflow: \"auto\",\n            marginTop: \"15px\"\n          },\n          className: \"overflowDiv\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              autoFocus: true,\n              value: tagname,\n              onChange: e => tagNameFilter(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 576,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(ScrollToBottom, {\n              children: tagList.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => addTagName(item),\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 583,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 328,\n    columnNumber: 5\n  }, this);\n};\n\n_s(GroupChat, \"s/fvZELeDY2MlfhH4UnSy2t5uc8=\");\n\n_c = GroupChat;\nexport default GroupChat;\n\nvar _c;\n\n$RefreshReg$(_c, \"GroupChat\");","map":{"version":3,"sources":["C:/Users/jeel/mynodeproject/data/chatAppFront/src/pages/GroupChat/GroupChat.js"],"names":["Avatar","Button","message","Upload","axios","Avatars","ImageViewer","moment","React","useState","useEffect","useCallback","useRef","RiSendPlaneLine","Icons","ModalField","APi","getData","ScrollToBottom","GroupStyle","GroupChat","socket","selectedGroup","userExist","text","setText","recieverD","setRecieverD","messages","setMessages","openModal","setOpenModal","submitted","setSubmitted","currentUser","setCurrentUser","isViewerOpen","setIsViewerOpen","currentImage","setCurrentImage","cancelUploadDisable","setcancelUploadDisable","images","setImages","groupDeail","setGroupDetail","messageEl","fileStatus","setFileStatus","files","setFiles","fileLoading","setFileLoading","alerted","setAlerted","tagModel","setTagModel","tagname","settagname","tagList","settagList","ref","sort","a","b","date","localeCompare","onchange","event","value","target","endsWith","getAllUsers","Authorization","token","then","res","data","catch","closeTagModel","addTagName","user","console","log","addName","name","tagNameFilter","list","filterList","filter","item","match","Object","keys","length","groupData","emit","sender","id","groupId","header","auth_token","sendData","type","sentAt","Date","on","temp","sendAt","format","filename","prev","push","sent_at","addFile","e","onlyFiles","dd","findIndex","eee","file","originFileObj","fsize","size","Math","round","setTimeout","removeFile","index","dataList","splice","fileStatusSet","addWarroomFile","imageFile","f","forEach","image","form","FormData","element","append","groupFileUpload","s","err","error","handleDonl","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","handleDownload","get","responseType","openImageViewer","i","closeImageViewer","imageupload","current","onImageChange","preventDefault","aban","display","fontWeight","fontSize","color","cursor","xs","sm","md","lg","xl","groupName","charAt","addEventListener","currentTarget","scroll","top","scrollHeight","behavior","map","marginTop","padding","width","height","wordBreak","justifyContent","opacity","key","content","maxHeight","overflow"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport { Avatar, Button, message, Upload } from \"antd\";\r\nimport axios from \"axios\";\r\nimport Avatars from \"react-avatar\";\r\nimport ImageViewer from \"react-simple-image-viewer\";\r\nimport moment from \"moment\";\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { RiSendPlaneLine } from \"react-icons/ri\";\r\nimport Icons from \"../../component/Icons/Icons\";\r\nimport ModalField from \"../../component/Modal/ModalDemo\";\r\nimport APi from \"../../core/chatRedux/axios\";\r\nimport { getData } from \"../../core/locaStorage/Local\";\r\nimport ScrollToBottom from \"react-scroll-to-bottom\";\r\nimport { GroupStyle } from \"./GroupStyle\";\r\nimport \"./GroupChatStyle.scss\";\r\n\r\nconst GroupChat = ({ socket, selectedGroup, userExist }) => {\r\n  // const {} = props;\r\n  const [text, setText] = useState(\"\");\r\n  const [recieverD, setRecieverD] = useState({});\r\n  const [messages, setMessages] = useState([]);\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const [submitted, setSubmitted] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [isViewerOpen, setIsViewerOpen] = useState(false);\r\n  const [currentImage, setCurrentImage] = useState(0);\r\n  const [cancelUploadDisable, setcancelUploadDisable] = useState(false);\r\n  const [images, setImages] = useState([]);\r\n  const [groupDeail, setGroupDetail] = useState([]);\r\n  const messageEl = useRef(null);\r\n\r\n  const [fileStatus, setFileStatus] = useState([]);\r\n  const [files, setFiles] = useState([]);\r\n  const [fileLoading, setFileLoading] = useState(false);\r\n  const [alerted, setAlerted] = useState(false);\r\n\r\n  const [tagModel, setTagModel] = useState(false);\r\n  const [tagname, settagname] = useState(\"\");\r\n  const [tagList, settagList] = useState([]);\r\n\r\n  const ref = useRef(\"\");\r\n\r\n  messages.sort(function (a, b) {\r\n    return a.date.localeCompare(b.date);\r\n  });\r\n\r\n  const onchange = (event) => {\r\n    const value = event.target.value;\r\n    if (value.endsWith(\"@\")) {\r\n      setTagModel(true);\r\n      APi.getAllUsers({\r\n        Authorization: `Bearer ${getData(\"user\").token}`,\r\n      })\r\n        .then((res) => {\r\n          settagList([...res.data.data]);\r\n        })\r\n        .catch(() => {\r\n          settagList([]);\r\n        });\r\n    }\r\n    if (value === \"\") {\r\n      setTagModel(false);\r\n    }\r\n    setText(value);\r\n  };\r\n\r\n  const closeTagModel = () => {\r\n    setTagModel(false);\r\n    settagname(\"\");\r\n  };\r\n\r\n  const addTagName = (user) => {\r\n    console.log(\"user\", user);\r\n    let addName = text + user.name + \" \";\r\n    setText(addName);\r\n    setTagModel(false);\r\n  };\r\n\r\n  const tagNameFilter = (event) => {\r\n    const value = event.target.value;\r\n    settagname(value);\r\n\r\n    APi.getAllUsers({\r\n      Authorization: `Bearer ${getData(\"user\").token}`,\r\n    })\r\n      .then((res) => {\r\n        const list = [...res.data.data];\r\n        const filterList = list.filter((item) => {\r\n          if (item.name.match(value, \"/gi\")) {\r\n            return item;\r\n          }\r\n        });\r\n        settagList(filterList);\r\n      })\r\n      .catch(() => {\r\n        settagList([]);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    // setMessages([]);\r\n    if (recieverD && Object.keys(recieverD).length === 0) {\r\n      // setSubmitted(true);\r\n    } else {\r\n      // setSubmitted(false);\r\n    }\r\n  }, [recieverD]);\r\n\r\n  // select Group\r\n\r\n  useEffect(() => {\r\n    setMessages([]);\r\n    const groupData = getData(\"selectedGroup\");\r\n    if (groupData && Object.keys(groupData).length !== 0) {\r\n      // setSubmitted(true);\r\n      setGroupDetail(groupData);\r\n    } else {\r\n      setGroupDetail({});\r\n    }\r\n    if (groupData && Object.keys(groupData).length !== 0) {\r\n      const user = getData(\"user\");\r\n      socket.emit(\"messageGroupHistory\", {\r\n        sender: user.id,\r\n        groupId: groupData.groupId,\r\n        header: { auth_token: getData(\"user\").token },\r\n      });\r\n    }\r\n  }, [selectedGroup]);\r\n\r\n  useEffect(() => {\r\n    const user = getData(\"user\");\r\n    setCurrentUser(user);\r\n  }, []);\r\n\r\n  const sendData = () => {\r\n    if (text !== \"\" && currentUser) {\r\n      //final data\r\n      let data = {\r\n        sender: getData(\"user\"),\r\n        type: \"chat\",\r\n        message: text,\r\n        groupId: getData(\"selectedGroup\").groupId,\r\n        sentAt: new Date(),\r\n      };\r\n\r\n      data.header = {};\r\n      data.header.auth_token = getData(\"user\").token;\r\n      console.log(data, \"......###\");\r\n      socket.emit(\"groupMessages\", data);\r\n      setText(\"\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"groupMessagesResponse\", (message) => {\r\n      console.log(\"mess\", message);\r\n      if (getData(\"selectedGroup\")) {\r\n        if (message.groupId === getData(\"selectedGroup\").groupId) {\r\n          let temp = {\r\n            type: message.type ? message.type : null,\r\n            sender: message.sender,\r\n            text: message.message,\r\n            date: moment(message.sendAt).format(\"YYYY-MM-DD HH:mm:ss\"),\r\n            filename: message.filename,\r\n          };\r\n          setMessages((prev) => {\r\n            prev.push(temp);\r\n            return prev;\r\n          });\r\n\r\n          setFileLoading(false);\r\n          setOpenModal(false);\r\n          setFiles([]);\r\n        }\r\n      }\r\n    });\r\n    socket.on(\"messageGroupHistoryResponse\", (message) => {\r\n      let temp = {\r\n        type: message.type ? message.type : null,\r\n        sender: message.sender,\r\n        text: message.message,\r\n        date: moment(message.sent_at).format(\"YYYY-MM-DD HH:mm:ss\"),\r\n        filename: message.filename,\r\n      };\r\n      setMessages((prev) => {\r\n        prev.push(temp);\r\n        return prev;\r\n      });\r\n      setFileLoading(false);\r\n      setOpenModal(false);\r\n      setFiles([]);\r\n    });\r\n  }, [socket]);\r\n\r\n  // upload\r\n  const addFile = (e) => {\r\n    // setAlerted(false);\r\n    const onlyFiles = [...files];\r\n    const dd = files.findIndex((eee) => eee.name === e.file.originFileObj.name);\r\n    if (e.file.type !== \"\") {\r\n      if (dd === -1) {\r\n        const fsize = e.file.size;\r\n        const file = Math.round(fsize / 1024);\r\n        if (file >= 4096) {\r\n          if (alerted === false) {\r\n            // message.error(\"please select a file less than 4mb\");\r\n            setAlerted(true);\r\n          }\r\n        } else {\r\n          onlyFiles.push(e.file.originFileObj);\r\n        }\r\n      }\r\n      setFiles([...onlyFiles]);\r\n    } else {\r\n      if (alerted === false) {\r\n        // message.error(\"Unknown File Type !\");\r\n        setAlerted(true);\r\n      }\r\n    }\r\n    setTimeout(() => {\r\n      setAlerted(false);\r\n    }, 2000);\r\n  };\r\n\r\n  const removeFile = (index) => {\r\n    const dataList = files;\r\n    dataList.splice(index, 1);\r\n    setFiles([...dataList]);\r\n    const fileStatusSet = fileStatus;\r\n    fileStatusSet.splice(index, 1);\r\n    setFileStatus([...fileStatusSet]);\r\n  };\r\n\r\n  // submit file\r\n\r\n  const addWarroomFile = (imageFile) => {\r\n    setcancelUploadDisable(true);\r\n    setFileLoading(true);\r\n\r\n    const f = [];\r\n\r\n    imageFile.forEach((dd, index) => {\r\n      f[index] = { index: index, image: dd };\r\n    });\r\n\r\n    if (currentUser && groupDeail) {\r\n      const form = new FormData();\r\n      imageFile.forEach((element) => {\r\n        form.append(\"files\", element);\r\n      });\r\n      form.append(\"sender\", currentUser.id);\r\n      form.append(\"groupId\", groupDeail.groupId);\r\n      form.append(\"type\", \"image\");\r\n\r\n      APi.groupFileUpload(form)\r\n        .then((res) => {\r\n          console.log(res, \"fileResponse\");\r\n          const s = {};\r\n          s.header = {};\r\n          s.header.auth_token = getData(\"user\").token;\r\n          s.files = [...res.data.data];\r\n          console.log(s);\r\n          socket.emit(\"groupFileUpload\", s);\r\n          setOpenModal(false);\r\n          setFileLoading(false);\r\n          setFiles([]);\r\n          setcancelUploadDisable(false);\r\n        })\r\n        .catch((err) => {\r\n          console.error(err);\r\n          setcancelUploadDisable(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  // download logic\r\n\r\n  const handleDonl = (file, filename) => {\r\n    const url = window.URL.createObjectURL(new Blob([file]));\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", filename);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n  };\r\n\r\n  // handle image download\r\n\r\n  const handleDownload = (url, filename) => {\r\n    axios\r\n      .get(url, {\r\n        responseType: \"blob\",\r\n      })\r\n      .then((res) => {\r\n        handleDonl(res.data, filename);\r\n      });\r\n  };\r\n\r\n  // image preview\r\n\r\n  const openImageViewer = useCallback((index, i) => {\r\n    setCurrentImage(index);\r\n    setImages([i]);\r\n    setIsViewerOpen(true);\r\n  }, []);\r\n\r\n  const closeImageViewer = () => {\r\n    setCurrentImage(0);\r\n    setImages([]);\r\n    setIsViewerOpen(false);\r\n  };\r\n  const imageupload = () => {\r\n    const value = ref.current.click();\r\n  };\r\n  const onImageChange = (event) => {\r\n    event.preventDefault();\r\n    let files = event.target.files;\r\n\r\n    let temp = [];\r\n    for (let a in files) {\r\n      temp.push(files[a]);\r\n    }\r\n    let aban = temp.splice(0, temp.length - 2);\r\n    setImages(aban);\r\n    addWarroomFile(aban);\r\n  };\r\n  return (\r\n    <GroupStyle>\r\n      {/* file upload input  */}\r\n      <input\r\n        type=\"file\"\r\n        onChange={(event) => onImageChange(event)}\r\n        ref={ref}\r\n        style={{ display: \"none\" }}\r\n        multiple\r\n      />\r\n      <div className=\"chat\">\r\n        {userExist === false || Object.keys(groupDeail).length === 0 ? (\r\n          <div className=\"nodata-page\">\r\n            <Icons type=\"moontech\" />\r\n            <span\r\n              style={{\r\n                fontWeight: \"bolder\",\r\n                fontSize: \"20px\",\r\n                color: \"#70bde9\",\r\n              }}\r\n            >\r\n              No conversation selected\r\n            </span>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"user-name\">\r\n              <h2>\r\n                <Avatar\r\n                  style={{ cursor: \"pointer\" }}\r\n                  size={{\r\n                    xs: 30,\r\n                    sm: 30,\r\n                    md: 30,\r\n                    lg: 30,\r\n                    xl: 30,\r\n                  }}\r\n                >\r\n                  {groupDeail.groupName\r\n                    ? `${groupDeail.groupName.charAt(0)}`\r\n                    : null}\r\n                </Avatar>\r\n                {groupDeail.groupName && Object.keys(groupDeail).length !== 0\r\n                  ? groupDeail.groupName\r\n                  : \"_ _ _\"}\r\n              </h2>\r\n            </div>\r\n            <div\r\n              className=\"chat-message\"\r\n              ref={(ref) => {\r\n                if (ref !== null) {\r\n                  ref.addEventListener(\"DOMNodeInserted\", (event) => {\r\n                    const { currentTarget: target } = event;\r\n                    target.scroll({\r\n                      top: target.scrollHeight,\r\n                      behavior: \"smooth\",\r\n                    });\r\n                  });\r\n                }\r\n              }}\r\n            >\r\n              {messages.map((i, index) => (\r\n                <div\r\n                  className={\r\n                    i.sender.id === currentUser.id\r\n                      ? \"message mess-right\"\r\n                      : \"message\"\r\n                  }\r\n                  key={index}\r\n                >\r\n                  {i.type === \"image\" ? (\r\n                    <>\r\n                      <span>{i.sender.name}</span>\r\n\r\n                      <p\r\n                        className={\r\n                          i.sender.id !== currentUser.id\r\n                            ? \"img hoverable\"\r\n                            : \"img\"\r\n                        }\r\n                      >\r\n                        <img\r\n                          src={`${i.text}`}\r\n                          onClick={() => openImageViewer(0, i.text)}\r\n                          alt=\"img\"\r\n                          style={{ cursor: \"pointer\" }}\r\n                        />\r\n                      </p>\r\n                      {i.sender.id !== currentUser.id ? (\r\n                        <>\r\n                          <Icons\r\n                            type=\"Download\"\r\n                            onClick={() => handleDownload(i.text, i.filename)}\r\n                          />\r\n                          <span>{i.date}</span>\r\n                        </>\r\n                      ) : (\r\n                        <span style={{ marginTop: \"3px\", padding: \"unset\" }}>\r\n                          <span>{i.date}</span>\r\n                          <Icons\r\n                            type=\"Download\"\r\n                            onClick={() => handleDownload(i.text, i.filename)}\r\n                          />\r\n                        </span>\r\n                      )}\r\n                    </>\r\n                  ) : i.type === \"file\" ? (\r\n                    <>\r\n                      <span>{i.sender.name}</span>\r\n                      <p\r\n                        className={\r\n                          i.sender.id !== currentUser.id\r\n                            ? \"img hoverable\"\r\n                            : \"img\"\r\n                        }\r\n                        style={{ width: \"100%\", height: \"auto\" }}\r\n                      >\r\n                        <span\r\n                          style={{\r\n                            display: \"flex\",\r\n                            wordBreak: \"break-all\",\r\n                          }}\r\n                          className={\r\n                            i.sender.id === currentUser.id\r\n                              ? \"fileType-right\"\r\n                              : \"fileType\"\r\n                          }\r\n                        >\r\n                          <svg\r\n                            fill=\"#000000\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            viewBox=\"0 0 80 80\"\r\n                            width=\"18px\"\r\n                            height=\"18px\"\r\n                          >\r\n                            <path d=\"M 15 9 L 15 71 L 65 71 L 65 23.585938 L 50.414063 9 Z M 17 11 L 49 11 L 49 25 L 63 25 L 63 69 L 17 69 Z M 51 12.414063 L 61.585938 23 L 51 23 Z M 22 13 C 21.449219 13 21 13.449219 21 14 C 21 14.550781 21.449219 15 22 15 C 22.550781 15 23 14.550781 23 14 C 23 13.449219 22.550781 13 22 13 Z M 22 17 C 21.449219 17 21 17.449219 21 18 C 21 18.550781 21.449219 19 22 19 C 22.550781 19 23 18.550781 23 18 C 23 17.449219 22.550781 17 22 17 Z M 22 21 C 21.449219 21 21 21.449219 21 22 C 21 22.550781 21.449219 23 22 23 C 22.550781 23 23 22.550781 23 22 C 23 21.449219 22.550781 21 22 21 Z M 22 25 C 21.449219 25 21 25.449219 21 26 C 21 26.550781 21.449219 27 22 27 C 22.550781 27 23 26.550781 23 26 C 23 25.449219 22.550781 25 22 25 Z M 22 29 C 21.449219 29 21 29.449219 21 30 C 21 30.550781 21.449219 31 22 31 C 22.550781 31 23 30.550781 23 30 C 23 29.449219 22.550781 29 22 29 Z M 22 33 C 21.449219 33 21 33.449219 21 34 C 21 34.550781 21.449219 35 22 35 C 22.550781 35 23 34.550781 23 34 C 23 33.449219 22.550781 33 22 33 Z M 22 37 C 21.449219 37 21 37.449219 21 38 C 21 38.550781 21.449219 39 22 39 C 22.550781 39 23 38.550781 23 38 C 23 37.449219 22.550781 37 22 37 Z M 22 41 C 21.449219 41 21 41.449219 21 42 C 21 42.550781 21.449219 43 22 43 C 22.550781 43 23 42.550781 23 42 C 23 41.449219 22.550781 41 22 41 Z M 22 45 C 21.449219 45 21 45.449219 21 46 C 21 46.550781 21.449219 47 22 47 C 22.550781 47 23 46.550781 23 46 C 23 45.449219 22.550781 45 22 45 Z M 22 49 C 21.449219 49 21 49.449219 21 50 C 21 50.550781 21.449219 51 22 51 C 22.550781 51 23 50.550781 23 50 C 23 49.449219 22.550781 49 22 49 Z M 22 53 C 21.449219 53 21 53.449219 21 54 C 21 54.550781 21.449219 55 22 55 C 22.550781 55 23 54.550781 23 54 C 23 53.449219 22.550781 53 22 53 Z M 22 57 C 21.449219 57 21 57.449219 21 58 C 21 58.550781 21.449219 59 22 59 C 22.550781 59 23 58.550781 23 58 C 23 57.449219 22.550781 57 22 57 Z M 22 61 C 21.449219 61 21 61.449219 21 62 C 21 62.550781 21.449219 63 22 63 C 22.550781 63 23 62.550781 23 62 C 23 61.449219 22.550781 61 22 61 Z M 22 65 C 21.449219 65 21 65.449219 21 66 C 21 66.550781 21.449219 67 22 67 C 22.550781 67 23 66.550781 23 66 C 23 65.449219 22.550781 65 22 65 Z\" />\r\n                          </svg>\r\n                          {i.filename}{\" \"}\r\n                        </span>\r\n                      </p>\r\n                      {i.sender.id !== currentUser.id ? (\r\n                        <>\r\n                          <Icons\r\n                            type=\"Download\"\r\n                            onClick={() => handleDownload(i.text, i.filename)}\r\n                          />\r\n                          <span>{i.date}</span>\r\n                        </>\r\n                      ) : (\r\n                        <span style={{ marginTop: \"3px\", padding: \"unset\" }}>\r\n                          <span>{i.date}</span>\r\n                          <Icons\r\n                            type=\"Download\"\r\n                            onClick={() => handleDownload(i.text, i.filename)}\r\n                          />\r\n                        </span>\r\n                      )}\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <span>{i.sender.name}</span>\r\n                      {i.sender.id !== currentUser.id ? (\r\n                        <div style={{ display: \"flex\" }}>\r\n                          <Avatars\r\n                            size=\"30\"\r\n                            name={i.sender.name}\r\n                            round={true}\r\n                          />\r\n                          <p>{i.text}</p>\r\n                        </div>\r\n                      ) : (\r\n                        <div style={{ display: \"flex\", justifyContent: \"end\" }}>\r\n                          <p>{i.text}</p>\r\n                          <Avatars\r\n                            googleId=\"118096717852922241760\"\r\n                            size=\"30\"\r\n                            name={i.sender.name}\r\n                            round={true}\r\n                          />\r\n                        </div>\r\n                      )}\r\n\r\n                      <span>{i.date}</span>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <div className=\"send\">\r\n              <input\r\n                placeholder=\"Enter Your Message\"\r\n                value={text}\r\n                style={{\r\n                  cursor: submitted ? \"not-allowed\" : \"text\",\r\n                  opacity: submitted ? 0.5 : 1,\r\n                }}\r\n                disabled={submitted}\r\n                onChange={(e) => {\r\n                  setText(e.target.value);\r\n                }}\r\n                onKeyPress={(e) => {\r\n                  if (e.key === \"Enter\") {\r\n                    sendData();\r\n                  }\r\n                }}\r\n              ></input>\r\n              <div className=\"btn-box1\" onClick={() => imageupload()}>\r\n                <Icons className=\"svgIcon\" type=\"attachemt\" />\r\n              </div>\r\n              <div\r\n                className=\"btn-box\"\r\n                onClick={\r\n                  !submitted\r\n                    ? () => sendData()\r\n                    : () =>\r\n                        message.error({\r\n                          content: \"Select User to Send Message\",\r\n                        })\r\n                }\r\n              >\r\n                <RiSendPlaneLine className=\"btn-icon\" />\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {isViewerOpen && (\r\n          <ImageViewer\r\n            src={images}\r\n            currentIndex={currentImage}\r\n            onClose={closeImageViewer}\r\n          />\r\n        )}\r\n        <ModalField\r\n          visible={tagModel}\r\n          title=\"Attachment\"\r\n          className=\"uploadmodal\"\r\n          onCancel={closeTagModel}\r\n          footer={false}\r\n        >\r\n          <div\r\n            style={{\r\n              maxHeight: \"100px\",\r\n              overflow: \"auto\",\r\n              marginTop: \"15px\",\r\n            }}\r\n            className=\"overflowDiv\"\r\n          >\r\n            <div>\r\n              <input\r\n                autoFocus\r\n                value={tagname}\r\n                onChange={(e) => tagNameFilter(e)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <ScrollToBottom>\r\n                {tagList.map((item) => (\r\n                  <div onClick={() => addTagName(item)}>{item.name}</div>\r\n                ))}\r\n              </ScrollToBottom>\r\n            </div>\r\n          </div>\r\n        </ModalField>\r\n      </div>\r\n    </GroupStyle>\r\n  );\r\n};\r\n\r\nexport default GroupChat;\r\n"]},"metadata":{},"sourceType":"module"}